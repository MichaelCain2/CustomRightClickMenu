(function(e,r){r(e.tern||(e.tern={}),e.acorn,e.acorn,e.acorn.walk,e.tern.def,e.tern.signal)})(window,function(e,r,t,p,o,n){"use strict";function a(e,r){var t=Object.create(e);if(r)for(var p in r)t[p]=r[p];return t}function s(e,r,t){var p=e.getType(!1),o=r.getType(!1);return p&&o?i(p,o,t):!0}function i(e,r,t){if(!e||5<=t)return r;if(!e||e==r)return e;if(!r)return e;if(e.constructor!=r.constructor)return!1;if(e.constructor==ve){var p=e.getProp("<i>").getType(!1);if(!p)return r;var o=r.getProp("<i>").getType(!1);if(!o||i(p,o,t+1))return r}else{if(e.constructor==xe){var n=0,g=0,d=0;for(var l in e.props)n++,l in r.props&&s(e.props[l],r.props[l],t+1)&&d++;for(var l in r.props)g++;return n&&g&&d<Math.max(n,g)/2?!1:n>g?e:r}return e.constructor==Se&&e.args.length==r.args.length&&e.args.every(function(e,p){return s(e,r.args[p],t+1)})&&s(e.retval,r.retval,t+1)&&s(e.self,r.self,t+1)&&e}}function g(e){for(var r,t=0,p=0,o=0,n=null,a=0;a<e.length;++a)if(r=e[a],r instanceof ve)++t;else if(r instanceof Se)++p;else if(r instanceof xe)++o;else if(r instanceof Te){if(n&&r.name!=n.name)return null;n=r}var i=(t&&1)+(p&&1)+(o&&1)+(n&&1);if(1<i)return null;if(n)return n;for(var s=0,g=null,a=0;a<e.length;++a){var r=e[a],d=0;if(t)d=r.getProp("<i>").isEmpty()?1:2;else if(p){d=1;for(var l=0;l<r.args.length;++l)r.args[l].isEmpty()||++d;r.retval.isEmpty()||++d}else o&&(d=r.name?100:2);d>=s&&(s=d,g=r)}return g}function d(e,r){Ce.disabledComputing={fn:e,prev:Ce.disabledComputing};var t=r();return Ce.disabledComputing=Ce.disabledComputing.prev,t}function l(e){var r=e.charCodeAt(0);return 48<=r&&57>=r&&!/\D/.test(e)}function y(e){return"__proto__"==e||"\u2716"==e||Ee&&"__iterator__"==e}function u(e,r){var t=Ce.props[e]||(Ce.props[e]=[]);t.push(r)}function c(e){return Ce.props[e]}function m(r){if(Ce.workList)return r(Ce.workList);for(var t=[],p=0,o=Ce.workList=function(e,r,o){p<we-Fe*t.length&&t.push(e,r,o,p)},n=r(o),a=0;a<t.length;a+=4){if(Oe&&+new Date>=Oe)throw new e.TimedOut;p=t[a+3]+1,t[a+1].addType(t[a],t[a+2])}return Ce.workList=null,n}function f(e,r,t){var p=Ce.curSuperCtor,o=Ce.curSuper;Ce.curSuperCtor=e,Ce.curSuper=r;var n=t();return Ce.curSuperCtor=p,Ce.curSuper=o,n}function h(e,r){for(;e.isBlock||e.isCatch||!1===r&&e.fnType&&e.fnType.isArrowFn();)e=e.prev;return e}function P(e,r){var t=h(e).fnType;t&&(t.instantiateScore=(t.instantiateScore||0)+r)}function b(e,r){try{return p.simple(e,{Expression:function(){if(0>=--r)throw je}}),!0}catch(r){if(r==je)return!1;throw r}}function T(e,r){var t=r.instantiateScore;return!Ce.disabledComputing&&t&&r.args.length&&b(e,5*t)?(P(h(r.originNode.scope.prev),t/2),x(e,r),!0):void(r.instantiateScore=null)}function x(e,r){for(var t=e.scope,o=0;o<r.args.length;++o)r.args[o]=new te;r.self=new te,r.computeRet=function(o,n){return d(r,function(){var a=Ce.curOrigin;Ce.curOrigin=r.origin;var s=e.scope?e.scope:t,g=new Ae(s.prev,s.originNode);for(var d in s.props)for(var l=g.defProp(d,s.props[d].originNode),y=0;y<n.length;++y)r.argNames[y]==d&&y<n.length&&n[y].propagate(l);for(var i=r.argNames.length==n.length?r.argNames:r.argNames.slice(0,n.length);i.length<n.length;)i.push("?");if(g.fnType=new Se(r.name,o,n,i,Z,r.generator),g.fnType.originNode=r.originNode,r.arguments){var u=g.fnType.arguments=new te;g.defProp("arguments").addType(new ve(u));for(var y=0;y<n.length;++y)n[y].propagate(u)}return e.scope=g,p.recursive(e.body,g,null,ke),p.recursive(e.body,g,null,De),Ce.curOrigin=a,g.fnType.retval})}}function E(e){function r(e,p,o){if(!(3<o)&&e.forward)for(var n,a=0;a<e.forward.length;++a)if(n=e.forward[a].propagatesTo(),n){var i,s=p;if(n instanceof te)i=n;else if(n.target instanceof te)s+=n.pathExt,i=n.target;else continue;if(i==t)return s;var g=r(i,s,o+1);if(g)return g}}var t=e.retval;if(!(t==Z||e.isArrowFn())){var n,a;!t.isEmpty()&&(n=t.getType())instanceof ve&&(t=a=n.getProp("<i>"));for(var s=r(e.self,"!this",0),g=0;!s&&g<e.args.length;++g)s=r(e.args[g],"!"+g,0);if(s){a&&(s="["+s+"]");var i=new o.TypeParser(s),p=i.parseType(!0);return e.computeRet=p.apply?p:function(){return p},e.computeRetSource=s,!0}}}function S(e,r){return e.defProp(r.name,r)}function v(e){return"Identifier"==e.type?e.name:"AssignmentPattern"==e.type?v(e.left):"ObjectPattern"==e.type?"{"+e.properties.map(function(r){return v(r.value)}).join(", ")+"}":"ArrayPattern"==e.type?"["+e.elements.map(function(r){return r?v(r):""}).join(", ")+"]":"RestElement"==e.type?"..."+v(e.argument):"_"}function N(e){return"VariableDeclaration"==e.type&&"var"!=e.kind||"FunctionDeclaration"==e.type||"ClassDeclaration"==e.type}function C(e,r){return{inner:e,outer:r||e}}function O(e){e.scope&&(e.scope=null)}function w(e){var r=e.getSymbolType();if(r)return r.asPropName()}function F(e){return"+"===e||"-"===e||"~"===e?Ce.num:"!"===e?Ce.bool:"typeof"===e?Ce.str:"void"===e||"delete"===e?Z:void 0}function A(e){return"=="===e||"!="===e||"==="===e||"!=="===e||"<"===e||">"===e||">="===e||"<="===e||"in"===e||"instanceof"===e||void 0}function j(e){if(e.regex)return le(Ce.protos.RegExp);switch(babelHelpers["typeof"](e.value)){case"boolean":return Ce.bool;case"number":return Ce.num;case"string":return Ce.str;case"object":case"function":return e.value?le(Ce.protos.RegExp):Z;}}function k(e,r){if(e==r||r==Z)return e;if(e==Z)return r;var t=new te;return e.propagate(t),r.propagate(t),t}function I(e,r){for(var t,p=0;p<e.params.length;p++)t=e.params[p],"Identifier"==t.type||R(t,r,e.scope.fnType.args[p])}function H(e,r){return r.hasProp(e.name)||Ce.topScope.defProp(e.name,e)}function R(e,r,t){var p=Re[e.type];p&&p(e,r,t)}function M(e){var r=h(e);return r.fnType?r.fnType.self:r}function D(e){e.isEmpty()&&e.propertyOf&&(e.propertyOf.getProp(e.propertyName).addType(new xe,ee),D(e.propertyOf))}function L(e,r,t){!t&&e.id&&(t=e.id.name);var p,o,n=Ce.protos.Object;if(e.superClass)if("Literal"==e.superClass.type&&null==e.superClass.value)n=null;else{var a,i=B(e.superClass,r);p=i.getFunctionType(),p&&(a=p.getProp("prototype").getObjType())?n=a:(p=i,o=i.getProp("prototype"))}var s=new xe(n,t&&t+".prototype");return o&&o.propagate(new he(s)),f(p,o||n,function(){for(var p,o=e.body.body,n=0;n<o.length;n++)"constructor"==o[n].kind&&(p=o[n].value);var a=e.objType=p?B(p,r):new Se(t,Z,[],null,Z);a.originNode=e.id||p||e;var i=le(s,a);a.self.addType(i),a.defProp("prototype",e).addType(s);for(var n=0;n<o.length;n++){var g,d=o[n];if("constructor"!=d.kind){var l=He(d,r);"<i>"==l||"set"==d.kind?g=Z:(g=(d["static"]?a:s).defProp(l,d.key),g.initializer=!0,"get"==d.kind&&(g=new se(i,[],null,g))),B(d.value,r,g);var y=g.getFunctionType();y&&y.self.addType(i)}}return a})}function _(e,r,t){var p=1<e.length&&6>e.length;if(p){for(var o,n,a=!0,s=0;s<e.length;s++)n=e[s],n?"Literal"!=n.type||o&&o!=babelHelpers["typeof"](n.value)?a=!1:o=babelHelpers["typeof"](n.value):p=!1;a&&(p=!1)}if(p){for(var i=[],s=0;s<e.length;++s)i.push(t(e[s],r));return new ve(i)}if(2>e.length)return new ve(e[0]&&t(e[0],r));for(var g=new te,s=0;s<e.length;s++)e[s]&&t(e[s],r).propagate(g);return new ve(g)}function V(e){return function(t,p,o,n){var a=e(t,p,n);return o&&a.propagate(o),a}}function G(e){return function(r,t,p,o){return p||(p=new te),e(r,t,p,o),p}}function B(e,r,t,p){var o=Me[e.type];return o?o(e,r,t,p):Z}function U(e){return"VariableDeclaration"==e.type?e.declarations[0].id:e}function q(e,r,t){var p=Array.isArray(e);return p&&1==e.length&&(e=e[0],p=!1),p?null==t?function(r){return-1<e.indexOf(r.origin)}:function(p,o){return o&&o.start>=r&&o.end<=t&&-1<e.indexOf(p.origin)}:null==t?function(r){return r.origin==e}:function(p,o){return o&&o.start>=r&&o.end<=t&&p.origin==e}}function z(e){Be=!0;var r=c(e);if(r)for(var t,p=0;p<r.length;++p)if(t=r[p].getProp(e),!t.isEmpty())return t;return Z}function W(e,r){var t=new xe(!0);t.defProp("done").addType(Ce.bool),r.propagate(t.defProp("value"));var p=new Se(null,Z,e?[e]:[],e?["?"]:[],t),o=new xe(Ce.definitions.ecmascript&&Ce.definitions.ecmascript.generator_prototype||!0);return o.defProp("next").addType(p),o}function Y(e,r){return e.generator?e.computeRet?W(e.yieldval,r):(!0===e.generator&&(e.generator=W(e.yieldval,r)),e.generator):r}function Q(e,r,t){var p=X(e,t).getFunctionType();if(!p)return Z;var o=p.retval;if(p.computeRet){for(var n=0,a=[];n<r.length;++n)a.push(X(r[n],t));var i=Z;"MemberExpression"==e.type&&(i=X(e.object,t)),o=p.computeRet(i,a,r)}return Y(p,o)}function X(e,r){var t=_e[e.type];return t?t(e,r):Z}var J=e.toString=function(e,r,t){return!e||e==t||r&&-3>r?"?":e.toString(r,t)},Z=e.ANull=n.mixin({addType:function(){},propagate:function(){},getProp:function(){return Z},forAllProps:function(){},hasType:function(){return!1},isEmpty:function(){return!0},getFunctionType:function(){},getObjType:function(){},getSymbolType:function(){},getType:function(){},gatherProperties:function(){},propagatesTo:function(){},typeHint:function(){},propHint:function(){},toString:function(){return"?"}}),$=100,K=90,ee=1,re=2,te=e.AVal=function(){this.types=[],this.forward=null,this.maxWeight=0};te.prototype=a(Z,{addType:function(e,r){if(r=r||$,this.maxWeight<r){if(this.maxWeight=r,1==this.types.length&&this.types[0]==e)return;this.types.length=0}else if(this.maxWeight>r||-1<this.types.indexOf(e))return;this.signal("addType",e),this.types.push(e);var t=this.forward;t&&m(function(p){for(var o=0;o<t.length;++o)p(e,t[o],r)})},propagate:function(e,r){if(!(e==Z||e instanceof be&&this.forward&&2<this.forward.length)){r&&r!=$&&(e=new Pe(e,r)),(this.forward||(this.forward=[])).push(e);var t=this.types;t.length&&m(function(p){for(var o=0;o<t.length;++o)p(t[o],e,r)})}},getProp:function(e){if(y(e))return Z;var r=(this.props||(this.props=Object.create(null)))[e];return r||(r=this.props[e]=new te,this.propagate(new ne(e,r))),r},forAllProps:function(e){this.propagate(new ie(e))},hasType:function(e){return-1<this.types.indexOf(e)},isEmpty:function(){return 0===this.types.length},getFunctionType:function(){for(var e=this.types.length-1;0<=e;--e)if(this.types[e]instanceof Se)return this.types[e]},getObjType:function(){for(var e,r=null,t=this.types.length-1;0<=t;--t)if(e=this.types[t],e instanceof xe){if(e.name)return e;r||(r=e)}return r},getSymbolType:function(){for(var e=this.types.length-1;0<=e;--e)if(this.types[e]instanceof Ne)return this.types[e]},getType:function(e){return 0===this.types.length&&!1!==e?this.makeupType():1===this.types.length?this.types[0]:g(this.types)},toString:function(e,r){if(0==this.types.length)return J(this.makeupType(),e,r);if(1==this.types.length)return J(this.types[0],e,r);var t=pe(this.types);return 2<t.length?"?":t.map(function(t){return J(t,e,r)}).join("|")},makeupPropType:function(e){var r=this.propertyName,t=e.proto&&e.proto.hasProp(r);if(t){var p=t.getType();if(p)return p}if("<i>"!=r){var o=e.hasProp("<i>");if(o)return o.getType()}else if(e.props["<i>"]!=this)for(var n in e.props){var a=e.props[n];if(!a.isEmpty())return a.getType()}},makeupType:function(){var e=this.propertyOf&&this.makeupPropType(this.propertyOf);if(e)return e;if(!this.forward)return null;for(var r,t=this.forward.length-1;0<=t;--t)if(r=this.forward[t].typeHint(),r&&!r.isEmpty())return Be=!0,r;for(var p,o=Object.create(null),n=null,t=0;t<this.forward.length;++t)p=this.forward[t].propHint(),p&&"length"!=p&&"<i>"!=p&&"\u2716"!=p&&p!=Ce.completingProperty&&(o[p]=!0,n=p);if(!n)return null;var a=c(n);if(a){var i=[];search:for(var s,t=0;t<a.length;++t){for(var p in s=a[t],o)if(!s.hasProp(p))continue search;s.hasCtor&&(s=le(s)),i.push(s)}var d=g(i);if(d)return Be=!0,d}},typeHint:function(){return this.types.length?this.getType():null},propagatesTo:function(){return this},gatherProperties:function(e,r){for(var t=0;t<this.types.length;++t)this.types[t].gatherProperties(e,r)},guessProperties:function(e){if(this.forward)for(var r,t=0;t<this.forward.length;++t)r=this.forward[t].propHint(),r&&e(r,null,0);var p=this.makeupType();p&&p.gatherProperties(e)}});var pe=e.simplifyTypes=function(e){var r=[];outer:for(var t,p=0;p<e.length;++p){t=e[p];for(var o,n=0;n<r.length;n++)if(o=i(t,r[n],0),o){r[n]=o;continue outer}r.push(t)}return r},oe=e.constraint=function(e){var r=function(){this.origin=Ce.curOrigin,this.construct.apply(this,arguments)};for(var t in r.prototype=Object.create(Z),e)e.hasOwnProperty(t)&&(r.prototype[t]=e[t]);return r},ne=oe({construct:function(e,r){this.prop=e,this.target=r},addType:function(e,r){e.getProp&&e.getProp(this.prop).propagate(this.target,r)},propHint:function(){return this.prop},propagatesTo:function(){if("<i>"==this.prop||!/[^\w_]/.test(this.prop))return{target:this.target,pathExt:"."+this.prop}}}),ae=e.PropHasSubset=e.DefProp=oe({construct:function(e,r,t){this.prop=e,this.type=r,this.originNode=t},addType:function(e,r){if(e instanceof xe){var t=e.defProp(this.prop,this.originNode);t.origin||(t.origin=this.origin),this.type.propagate(t,r)}},propHint:function(){return this.prop}}),ie=oe({construct:function(e){this.c=e},addType:function(e){e instanceof xe&&e.forAllProps(this.c)}}),se=e.IsCallee=oe({construct:function(e,r,t,p){this.self=e,this.args=r,this.argNodes=t,this.retval=p,this.disabled=Ce.disabledComputing},addType:function(e,r){if(e instanceof Se){for(var t=0;t<this.args.length;++t)t<e.args.length&&this.args[t].propagate(e.args[t],r),e.arguments&&this.args[t].propagate(e.arguments,r);e.isArrowFn()||this.self.propagate(e.self,this.self==Ce.topScope?90:r);var p=e.computeRet,o=e.retval;if(p)for(var n=this.disabled;n;n=n.prev)(n.fn==e||e.originNode&&n.fn.originNode==e.originNode)&&(p=null);if(p){var a=Ce.disabledComputing;Ce.disabledComputing=this.disabled,o=p(this.self,this.args,this.argNodes),Ce.disabledComputing=a}Y(e,o).propagate(this.retval,r)}},typeHint:function(){for(var e=[],r=0;r<this.args.length;++r)e.push("?");return new Se(null,this.self,this.args,e,Z)},propagatesTo:function(){return{target:this.retval,pathExt:".!ret"}}}),ge=oe({construct:function(e,r,t,p){this.propName=e,this.args=r,this.argNodes=t,this.retval=p,this.disabled=Ce.disabledComputing},addType:function(e,r){var t=new se(e,this.args,this.argNodes,this.retval);t.disabled=this.disabled,e.getProp(this.propName).propagate(t,r)},propHint:function(){return this.propName}}),de=e.IsCtor=oe({construct:function(e,r){this.target=e,this.noReuse=r},addType:function(e,r){e instanceof Se&&(Ce.parent&&!Ce.parent.options.reuseInstances&&(this.noReuse=!0),e.getProp("prototype").propagate(new ye(!this.noReuse&&e,this.target),r))}}),le=e.getInstance=function(e,r){if(!1===r)return new xe(e);r||(r=e.hasCtor),e.instances||(e.instances=[]);for(var t,p=0;p<e.instances.length;++p)if(t=e.instances[p],t.ctor==r)return t.instance;var o=new xe(e,r&&r.name);return o.origin=e.origin,e.instances.push({ctor:r,instance:o}),o},ye=e.IsProto=oe({construct:function(e,r){this.ctor=e,this.target=r},addType:function(e){!(e instanceof xe)||8<(this.count=(this.count||0)+1)||(e==Ce.protos.Array?this.target.addType(new ve):this.target.addType(le(e,this.ctor)))}}),ue=oe({construct:function(e){this.fn=e},addType:function(e){if(e instanceof xe&&!e.hasCtor){e.hasCtor=this.fn;var r=new fe(e,this.fn);r.addType(this.fn),e.forAllProps(function(e,t,p){p&&t.propagate(r)})}}}),ce=oe({construct:function(e,r){this.other=e,this.target=r},addType:function(e,r){e==Ce.str?this.target.addType(Ce.str,r):e==Ce.num&&this.other.hasType(Ce.num)&&this.target.addType(Ce.num,r)},typeHint:function(){return this.other}}),me=e.IfObj=oe({construct:function(e){this.target=e},addType:function(e,r){e instanceof xe&&this.target.addType(e,r)},propagatesTo:function(){return this.target}}),fe=oe({construct:function(e,r){this.obj=e,this.ctor=r},addType:function(e){e instanceof Se&&e.self&&e.self.addType(le(this.obj,this.ctor),4)}}),he=oe({construct:function(e){this.obj=e},addType:function(e){e instanceof xe&&this.obj.proto==Ce.protos.Object&&this.obj.replaceProto(e)}}),Pe=oe({construct:function(e,r){this.inner=e,this.weight=r},addType:function(e,r){this.inner.addType(e,Math.min(r,this.weight))},propagatesTo:function(){return this.inner.propagatesTo()},typeHint:function(){return this.inner.typeHint()},propHint:function(){return this.inner.propHint()}}),be=e.Type=function(){};be.prototype=a(Z,{constructor:be,propagate:function(e,r){e.addType(this,r)},hasType:function(e){return e==this},isEmpty:function(){return!1},typeHint:function(){return this},getType:function(){return this}});var Te=e.Prim=function(e,r){this.name=r,this.proto=e};Te.prototype=a(be.prototype,{constructor:Te,toString:function(){return this.name},getProp:function(e){return this.proto.hasProp(e)||Z},gatherProperties:function(e,r){this.proto&&this.proto.gatherProperties(e,r)}});var xe=e.Obj=function(e,r){if(this.props||(this.props=Object.create(null)),this.proto=!0===e?Ce.protos.Object:e,e&&e!=Ce.protos.Object&&!r&&e.name&&!(this instanceof Se)){var t=/^(.*)\.prototype$/.exec(this.proto.name);t&&(r=t[1])}this.name=r,this.maybeProps=null,this.origin=Ce.curOrigin};xe.prototype=a(be.prototype,{constructor:xe,toString:function(e){if(null==e&&(e=0),0>=e&&this.name)return this.name;var r=[],t=!1;for(var p in this.props)if("<i>"!=p){if(5<r.length){t=!0;break}e?r.push(p+": "+J(this.props[p],e-1,this)):r.push(p)}return r.sort(),t&&r.push("..."),"{"+r.join(", ")+"}"},hasProp:function(e,r){l(e)&&(e=this.normalizeIntegerProp(e));var t=this.props[e];if(!1!==r)for(var o=this.proto;o&&!t;o=o.proto)t=o.props[e];return t},defProp:function(e,r){var t=this.hasProp(e,!1);if(t)return r&&!t.originNode&&(t.originNode=r),t;if(y(e))return Z;l(e)&&(e=this.normalizeIntegerProp(e));var p=this.maybeProps&&this.maybeProps[e];return p?(delete this.maybeProps[e],this.maybeUnregProtoPropHandler()):(p=new te,p.propertyOf=this,p.propertyName=e),this.props[e]=p,p.originNode=r,p.origin=Ce.curOrigin,this.broadcastProp(e,p,!0),p},getProp:function(e){var r=this.hasProp(e,!0)||this.maybeProps&&this.maybeProps[e];if(r)return r;if(y(e))return Z;l(e)&&(e=this.normalizeIntegerProp(e));var t=this.ensureMaybeProps()[e]=new te;return t.propertyOf=this,t.propertyName=e,t},normalizeIntegerProp:function(){return"<i>"},broadcastProp:function(e,r,t){if(t&&(this.signal("addProp",e,r),!(this instanceof Ae)&&u(e,this)),this.onNewProp)for(var p,o=0;o<this.onNewProp.length;++o)p=this.onNewProp[o],p.onProtoProp?p.onProtoProp(e,r,t):p(e,r,t)},onProtoProp:function(e,r){var t=this.maybeProps&&this.maybeProps[e];t&&(delete this.maybeProps[e],this.maybeUnregProtoPropHandler(),this.proto.getProp(e).propagate(t)),this.broadcastProp(e,r,!1)},replaceProto:function(e){for(var r=e;r;r=r.proto)if(r==this)return;this.proto&&this.maybeProps&&this.proto.unregPropHandler(this),this.proto=e,this.maybeProps&&this.proto.forAllProps(this)},ensureMaybeProps:function(){return this.maybeProps||(this.proto&&this.proto.forAllProps(this),this.maybeProps=Object.create(null)),this.maybeProps},removeProp:function(e){var r=this.props[e];delete this.props[e],this.ensureMaybeProps()[e]=r,r.types.length=0},forAllProps:function(e){this.onNewProp||(this.onNewProp=[],this.proto&&this.proto.forAllProps(this)),this.onNewProp.push(e);for(var r=this;r;r=r.proto)for(var t in r.props)e.onProtoProp?e.onProtoProp(t,r.props[t],r==this):e(t,r.props[t],r==this)},maybeUnregProtoPropHandler:function(){if(this.maybeProps){for(var e in this.maybeProps)return;this.maybeProps=null}!this.proto||this.onNewProp&&this.onNewProp.length||this.proto.unregPropHandler(this)},unregPropHandler:function(e){for(var r=0;r<this.onNewProp.length;++r)if(this.onNewProp[r]==e){this.onNewProp.splice(r,1);break}this.maybeUnregProtoPropHandler()},gatherProperties:function(e,r){for(var t in this.props)"<i>"!=t&&":"!=t.charAt(0)&&e(t,this,r);this.proto&&this.proto.gatherProperties(e,r+1)},getObjType:function(){return this}});var Ee="undefined"!=typeof StopIteration,Se=e.Fn=function(e,r,t,p,o,n){xe.call(this,Ce.protos.Function,e),this.self=r,this.args=t,this.argNames=p,this.retval=o,this.generator=n};Se.prototype=a(xe.prototype,{constructor:Se,toString:function(e){null==e&&(e=0);for(var r=this.generator?"fn*(":"fn(",t=0;t<this.args.length;++t){t&&(r+=", ");var p=this.argNames[t];p&&"?"!=p&&(r+=p+": "),r+=-3<e?J(this.args[t],e-1,this):"?"}return r+=")",this.retval.isEmpty()||(r+=" -> "+(-3<e?J(this.retval,e-1,this):"?")),r},getProp:function(e){if("prototype"==e){var r=this.hasProp(e,!1);if(!r){r=this.defProp(e);var t=new xe(!0,this.name&&this.name+".prototype");t.origin=this.origin,r.addType(t,10)}return r}return xe.prototype.getProp.call(this,e)},defProp:function(e,r){if("prototype"==e){var t=this.hasProp(e,!1);return t?t:(t=xe.prototype.defProp.call(this,e,r),t.origin=this.origin,t.propagate(new ue(this)),t)}return xe.prototype.defProp.call(this,e,r)},getFunctionType:function(){return this},isArrowFn:function(){return this.originNode&&"ArrowFunctionExpression"==this.originNode.type}});var ve=e.Arr=function(e){xe.call(this,Ce.protos.Array);var r=this.defProp("<i>");if(Array.isArray(e)){this.tuple=e.length;for(var t,p=0;p<e.length;p++)t=this.defProp(p+""),e[p].propagate(t),t.propagate(r)}else e&&(this.tuple=0,e.propagate(r))};ve.prototype=a(xe.prototype,{constructor:ve,toString:function(e){if(null==e&&(e=0),-3>=e)return"[?]";var r="";if(this.tuple){for(var t,p,o=0;o in this.props;o++)p=J(this.getProp(o+""),e-1,this),t=null==t?p:t==p&&p,r+=(r?", ":"")+p;t&&(r=t)}else r=J(this.getProp("<i>"),e-1,this);return"["+r+"]"},normalizeIntegerProp:function(e){return+e<this.tuple?e:"<i>"}});var Ne=e.Sym=function(e,r){Te.call(this,Ce.protos.Symbol,"Symbol"),this.symName=e,this.originNode=r};Ne.prototype=a(Te.prototype,{constructor:Ne,asPropName:function(){return":"+this.symName},getSymbolType:function(){return this}}),e.getSymbol=function(e,r){var t=e.replace(/[^\w$\.]/g,"_"),p=Ce.symbols[t];return p?(r&&!p.originNode&&(p.originNode=r),p):Ce.symbols[t]=new Ne(t,r)},e.Context=function(r,t){this.parent=t,this.props=Object.create(null),this.protos=Object.create(null),this.origins=[],this.curOrigin="ecmascript",this.paths=Object.create(null),this.definitions=Object.create(null),this.purgeGen=0,this.workList=null,this.disabledComputing=null,this.curSuperCtor=this.curSuper=null,this.symbols=Object.create(null),e.withContext(this,function(){if(Ce.protos.Object=new xe(null,"Object.prototype"),Ce.topScope=new Ae,Ce.topScope.name="<top>",Ce.protos.Array=new xe(!0,"Array.prototype"),Ce.protos.Function=new Se("Function.prototype",Z,[],[],Z),Ce.protos.Function.proto=Ce.protos.Object,Ce.protos.RegExp=new xe(!0,"RegExp.prototype"),Ce.protos.String=new xe(!0,"String.prototype"),Ce.protos.Number=new xe(!0,"Number.prototype"),Ce.protos.Boolean=new xe(!0,"Boolean.prototype"),Ce.protos.Symbol=new xe(!0,"Symbol.prototype"),Ce.str=new Te(Ce.protos.String,"string"),Ce.bool=new Te(Ce.protos.Boolean,"bool"),Ce.num=new Te(Ce.protos.Number,"number"),Ce.curOrigin=null,r)for(var e=0;e<r.length;++e)o.load(r[e])})},e.Context.prototype.startAnalysis=function(){this.disabledComputing=this.workList=this.curSuperCtor=this.curSuper=null};var Ce=null;e.cx=function(){return Ce},e.withContext=function(e,r){var t=Ce;Ce=e;try{return r()}finally{Ce=t}},e.TimedOut=function(){this.message="Timed out",this.stack=new Error().stack},e.TimedOut.prototype=Object.create(Error.prototype),e.TimedOut.prototype.name="infer.TimedOut";var Oe;e.withTimeout=function(e,r){var t=+new Date+e,p=Oe;if(p&&p<t)return r();Oe=t;try{return r()}finally{Oe=p}},e.addOrigin=function(e){0>Ce.origins.indexOf(e)&&Ce.origins.push(e)};var we=20,Fe=1e-4,Ae=e.Scope=function(e,r,t,p){xe.call(this,e||!0),this.prev=e,this.originNode=r,this.isBlock=!!t,this.isCatch=!!p};Ae.prototype=a(xe.prototype,{constructor:Ae,defVar:function(e,r){for(var t,p=this;;p=p.proto){if(t=p.props[e],t)return t;if(!p.prev)return p.defProp(e,r)}}});var je={},ke=e.scopeGatherer=p.make({VariablePattern:function(e,r){r.inner&&S(r.inner,e)},AssignmentPattern:function(e,r,t){t(e.left,r,"Pattern"),t(e.right,r.outer,"Expression")},AssignmentExpression:function(e,r,t){"MemberExpression"==e.left.type?t(e.left,r,"Expression"):t(e.left,C(!1,r),"Pattern"),t(e.right,r,"Expression")},MemberPattern:function(e,r,t){t(e,r.outer)},Function:function(e,r,t){for(var p,o=e.scope=new Ae(r,e),n=[],a=[],s=0;s<e.params.length;++s)if(p=e.params[s],a.push(v(p)),"Identifier"==p.type)n.push(S(o,p));else{var i=new te;n.push(i),i.originNode=p,t(p,C(o),"Pattern")}if(o.fnType=new Se(e.id&&e.id.name,new te(),n,a,Z,e.generator),o.fnType.originNode=e,e.id){var g="FunctionDeclaration"==e.type;S(g?r:o,e.id)}t(e.body,o,e.expression?"Expression":"Statement")},BlockStatement:function(e,r,t){!e.scope&&e.body.some(N)&&(r=e.scope=new Ae(r,e,!0)),p.base.BlockStatement(e,r,t)},CatchClause:function(e,r,t){if(r=e.scope=new Ae(r,e,!1,!0),"Identifier"==e.param.type){var p=S(r,e.param);t(e.body,r,"Statement");var o=Ce.definitions.ecmascript;o&&p.isEmpty()&&le(o["Error.prototype"]).propagate(p,6)}else t(e.param,C(r),"Pattern")},VariableDeclaration:function(e,r,t){for(var p,o="var"==e.kind?h(r):r,n=0;n<e.declarations.length;++n)p=e.declarations[n],t(p.id,C(o,r),"Pattern"),p.init&&t(p.init,r,"Expression")},ClassDeclaration:function(e,r,t){S(r,e.id),e.superClass&&t(e.superClass,r,"Expression");for(var p=0;p<e.body.body.length;p++)t(e.body.body[p],r)},ForInStatement:function(e,r,t){!e.scope&&N(e.left)&&(r=e.scope=new Ae(r,e,!0)),p.base.ForInStatement(e,r,t)},ForStatement:function(e,r,t){!e.scope&&e.init&&N(e.init)&&(r=e.scope=new Ae(r,e,!0)),p.base.ForStatement(e,r,t)},ImportDeclaration:function(e,r){for(var t=0;t<e.specifiers.length;t++)S(r,e.specifiers[t].local)}});ke.ForOfStatement=ke.ForInStatement;var Ie={BlockStatement:O,Function:O,CatchClause:O,ForInStateMent:O,ForStatement:O};e.clearScopes=function(e){p.simple(e,Ie)};var He=e.propName=function(e,r){var t=e.property||e.key;if(!e.computed&&"Identifier"==t.type)return t.name;if("Literal"==t.type){if("string"==typeof t.value)return t.value;if("number"==typeof t.value)return t.value+""}if(r){var p=w(B(t,r));if(p)return e.propName=p}else if(e.propName)return e.propName;return"<i>"},Re=e.inferPatternVisitor={Identifier:function(e,r,t){t.propagate(H(e,r))},MemberExpression:function(e,r,t){var p=B(e.object,r),o=He(e,r);p.propagate(new ae(o,t,e.property))},RestElement:function(e,r,t){R(e.argument,r,new ve(t))},ObjectPattern:function(e,r,t){for(var p,o=0;o<e.properties.length;++o)p=e.properties[o],R(p.value,r,t.getProp(He(p)))},ArrayPattern:function(e,r,t){for(var p=0;p<e.elements.length;p++)e.elements[p]&&R(e.elements[p],r,t.getProp(p+""))},AssignmentPattern:function(e,r,t){R(e.left,r,k(t,B(e.right,r)))}},Me=e.inferExprVisitor={ArrayExpression:V(function(e,r){return _(e.elements,r,B)}),ObjectExpression:V(function(e,r,t){for(var p,o,n=Ce.protos.Object,a=0;a<e.properties.length;++a)if(o=e.properties[a],"__proto__"==o.key.name)if("Literal"==o.value.type&&null==o.value.value)n=null;else{var i=B(o.value,r),s=i.getObjType();s?n=s:p=i}var g=e.objType=new xe(n,t);return p&&p.propagate(new he(g)),g.originNode=e,f(null,p||n,function(){for(var t=0;t<e.properties.length;++t){var p=e.properties[t],o=p.key;if(!y(p.key.name)){var n,a=He(p,r);if("<i>"==a||"set"==p.kind)n=Z;else{var i=n=g.defProp(a,o);i.initializer=!0,"get"==p.kind&&(n=new se(g,[],null,i))}B(p.value,r,n,a),"FunctionExpression"==p.value.type&&p.value.scope.fnType.self.addType(g,re)}}}),g}),FunctionExpression:V(function(e,r,t){var o=e.scope,n=o.fnType;return t&&!n.name&&(n.name=t),I(e,o),e.expression?B(e.body,o,o.fnType.retval=new te):p.recursive(e.body,o,null,De,"Statement"),"ArrowFunctionExpression"==e.type&&M(r).propagate(n.self),T(e,n)||E(n),e.id&&o.getProp(e.id.name).addType(n),n}),ClassExpression:V(L),SequenceExpression:V(function(e,r){for(var t=0,p=e.expressions.length-1;t<p;++t)B(e.expressions[t],r,Z);return B(e.expressions[p],r)}),UnaryExpression:V(function(e,r){return B(e.argument,r,Z),F(e.operator)}),UpdateExpression:V(function(e,r){return B(e.argument,r,Z),Ce.num}),BinaryExpression:V(function(e,r){if("+"==e.operator){var t=B(e.left,r),p=B(e.right,r);if(t.hasType(Ce.str)||p.hasType(Ce.str))return Ce.str;if(t.hasType(Ce.num)&&p.hasType(Ce.num))return Ce.num;var o=new te;return t.propagate(new ce(p,o)),p.propagate(new ce(t,o)),o}return B(e.left,r,Z),B(e.right,r,Z),A(e.operator)?Ce.bool:Ce.num}),AssignmentExpression:V(function(e,r,t){var p,o;if("MemberExpression"==e.left.type?(o=He(e.left,r),!t&&(t="Identifier"==e.left.object.type?e.left.object.name+"."+o:o)):!t&&"Identifier"==e.left.type&&(t=e.left.name),e.operator&&"="!=e.operator&&"+="!=e.operator?(B(e.right,r,Z),p=Ce.num):p=B(e.right,r,null,t),"MemberExpression"==e.left.type){var n=B(e.left.object,r);if("prototype"==o&&P(r,20),"<i>"==o){var a=e.left.property.name,i=r.props[a],s=i&&i.iteratesOver;if(s){P(r,20);var g="MemberExpression"==e.right.type&&e.right.computed&&e.right.property.name==a;return s.forAllProps(function(e,r,t){t&&"prototype"!=e&&"<i>"!=e&&n.propagate(new ae(e,g?r:Z))}),p}}n.propagate(new ae(o,p,e.left.property)),D(n),"FunctionExpression"==e.right.type&&n.propagate(e.right.scope.fnType.self,re)}else R(e.left,r,p);return p}),LogicalExpression:G(function(e,r,t){B(e.left,r,t),B(e.right,r,t)}),ConditionalExpression:G(function(e,r,t){B(e.test,r,Z),B(e.consequent,r,t),B(e.alternate,r,t)}),NewExpression:G(function(e,r,t,p){"Identifier"==e.callee.type&&e.callee.name in r.props&&P(r,20);for(var o=0,n=[];o<e.arguments.length;++o)n.push(B(e.arguments[o],r));var a=B(e.callee,r),i=new te;a.propagate(new de(i,p&&/\.prototype$/.test(p))),i.propagate(t,K),a.propagate(new se(i,n,e.arguments,new me(t)))}),CallExpression:G(function(e,r,t){for(var p=0,o=[];p<e.arguments.length;++p)o.push(B(e.arguments[p],r));var n=h(r).fnType;if("MemberExpression"==e.callee.type){var a=B(e.callee.object,r),i=He(e.callee,r);n&&("call"==i||"apply"==i)&&-1<n.args.indexOf(a)&&P(r,30),a.propagate(new ge(i,o,e.arguments,t))}else if("Super"==e.callee.type&&Ce.curSuperCtor)e.callee.superType=Ce.curSuperCtor,Ce.curSuperCtor.propagate(new se(M(r),o,e.arguments,t)),M(r).propagate(t,K);else{var s=B(e.callee,r);n&&-1<n.args.indexOf(s)&&P(r,30);var g=s.getFunctionType();g&&g.instantiateScore&&n&&P(r,g.instantiateScore/5),s.propagate(new se(Ce.topScope,o,e.arguments,t))}}),MemberExpression:G(function(e,r,t){var p,o=He(e);if("<i>"==o){var n=B(e.property,r),a=w(n);a?o=e.propName=a:!n.hasType(Ce.num)&&(p=6)}B(e.object,r).getProp(o).propagate(t,p)}),Identifier:V(function(e,r){if("arguments"==e.name){var t=h(r,!1);t.fnType&&!(e.name in t.props)&&t.defProp(e.name,t.fnType.originNode).addType(new ve(t.fnType.arguments=new te))}return r.getProp(e.name)}),ThisExpression:V(function(e,r){return M(r)}),Super:V(function(e){return e.superType=Ce.curSuper||Z}),Literal:V(function(e){return j(e)}),TemplateLiteral:V(function(e,r){for(var t=0;t<e.expressions.length;++t)B(e.expressions[t],r,Z);return Ce.str}),TaggedTemplateExpression:G(function(e,r,t){for(var p=[new ve(Ce.str)],o=0;o<e.quasi.expressions.length;++o)p.push(B(e.quasi.expressions[o],r));B(e.tag,r,new se(Ce.topScope,p,e.quasi.expressions,t))}),YieldExpression:V(function(e,r){var t=Z,p=h(r).fnType;return p&&(p.retval==Z&&(p.retval=new te),!p.yieldval&&(p.yieldval=new te),t=p.retval),e.argument&&(e.delegate?B(e.argument,r,new ge("next",[],null,new ne("value",t))):B(e.argument,r,t)),p?p.yieldval:Z})};Me.ArrowFunctionExpression=Me.FunctionExpression;var De=e.inferWrapper=p.make({Expression:function(e,r){B(e,e.scope||r,Z)},FunctionDeclaration:function(e,r,t){var p=e.scope,o=p.fnType;I(e,p),t(e.body,p,"Statement"),T(e,o)||E(o),r.getProp(e.id.name).addType(o)},Statement:function(e,r,t){t(e,e.scope||r)},VariableDeclaration:function(e,r){for(var t,p=0;p<e.declarations.length;++p)if(t=e.declarations[p],"Identifier"==t.id.type){var o=r.getProp(t.id.name);t.init&&B(t.init,r,o,t.id.name)}else t.init&&R(t.id,r,B(t.init,r))},ClassDeclaration:function(e,r){r.getProp(e.id.name).addType(L(e,r,e.id.name))},ReturnStatement:function(e,r){if(e.argument){var t=Z,p=h(r).fnType;p&&(p.retval==Z&&(p.retval=new te),t=p.retval),B(e.argument,r,t)}},ForInStatement:function(e,r,t){var p=B(e.right,r);if("Identifier"==e.right.type&&e.right.name in r.props||"MemberExpression"==e.right.type&&"prototype"==e.right.property.name){P(r,5);var o=U(e.left);"Identifier"==o.type?(o.name in r.props&&(r.getProp(o.name).iteratesOver=p),p.getProp("<i>").propagate(H(o,r))):R(o,r,p.getProp("<i>"))}t(e.body,r,"Statement")},ForOfStatement:function(e,r,t){var p,o=U(e.left);"Identifier"==o.type?p=H(o,r):R(o,r,p=new te),B(e.right,r,new ge(":Symbol.iterator",[],null,new ge("next",[],null,new ne("value",p)))),t(e.body,r,"Statement")}}),Le=e.parse=function(e,p,o){(!p||Array.isArray(p))&&(p=o);var n;try{n=r.parse(e,p)}catch(r){n=t.parse_dammit(e,p)}return n};e.analyze=function(r,t,o){"string"==typeof r&&(r=Le(r)),t||(t="file#"+Ce.origins.length),e.addOrigin(Ce.curOrigin=t),o||(o=Ce.topScope),Ce.startAnalysis(),p.recursive(r,o,null,ke),Ce.parent&&Ce.parent.signal("preInfer",r,o),p.recursive(r,o,null,De),Ce.parent&&Ce.parent.signal("postInfer",r,o),Ce.curOrigin=null},e.purge=function(e,r,t){var p=q(e,r,t);for(var o in++Ce.purgeGen,Ce.topScope.purge(p),Ce.props){for(var n=Ce.props[o],a=0;a<n.length;++a){var i=n[a],s=i.props[o];(!s||p(s,s.originNode))&&n.splice(a--,1)}n.length||delete Ce.props[o]}},te.prototype.purge=function(e){if(this.purgeGen!=Ce.purgeGen){this.purgeGen=Ce.purgeGen;for(var r,t=0;t<this.types.length;++t)r=this.types[t],e(r,r.originNode)?this.types.splice(t--,1):r.purge(e);if(this.types.length||(this.maxWeight=0),this.forward)for(var p,t=0;t<this.forward.length;++t)p=this.forward[t],e(p)?(this.forward.splice(t--,1),this.props&&(this.props=null)):p.purge&&p.purge(e)}},Z.purge=function(){},xe.prototype.purge=function(e){if(this.purgeGen==Ce.purgeGen)return!0;for(var r in this.purgeGen=Ce.purgeGen,this.props){var t=this.props[r];e(t,t.originNode)&&this.removeProp(r),t.purge(e)}},Se.prototype.purge=function(e){if(!xe.prototype.purge.call(this,e)){this.self.purge(e),this.retval.purge(e);for(var r=0;r<this.args.length;++r)this.args[r].purge(e)}};var _e=e.typeFinder={ArrayExpression:function(e,r){return _(e.elements,r,X)},ObjectExpression:function(e){return e.objType},ClassExpression:function(e){return e.objType},FunctionExpression:function(e){return e.scope.fnType},ArrowFunctionExpression:function(e){return e.scope.fnType},SequenceExpression:function(e,r){return X(e.expressions[e.expressions.length-1],r)},UnaryExpression:function(e){return F(e.operator)},UpdateExpression:function(){return Ce.num},BinaryExpression:function(e,r){if(A(e.operator))return Ce.bool;if("+"==e.operator){var t=X(e.left,r),p=X(e.right,r);if(t.hasType(Ce.str)||p.hasType(Ce.str))return Ce.str}return Ce.num},AssignmentExpression:function(e,r){return X(e.right,r)},LogicalExpression:function(e,r){var t=X(e.left,r);return t.isEmpty()?X(e.right,r):t},ConditionalExpression:function(e,r){var t=X(e.consequent,r);return t.isEmpty()?X(e.alternate,r):t},NewExpression:function(e,r){var t=X(e.callee,r).getFunctionType(),p=t&&t.getProp("prototype").getObjType();return p?le(p,t):Z},CallExpression:function(e,r){return Q(e.callee,e.arguments,r)},MemberExpression:function(e,r){var t=He(e),p=X(e.object,r).getType();return p?p.getProp(t):"<i>"==t?Z:z(t)},MethodDefinition:function(e){var r=He(e),t=M(e.value.scope).getType();return t?t.getProp(r):Z},Identifier:function(e,r){return r.hasProp(e.name)||Z},ThisExpression:function(e,r){return M(r)},Literal:function(e){return j(e)},Super:V(function(e){return e.superType}),TemplateLiteral:function(){return Ce.str},TaggedTemplateExpression:function(e,r){return Q(e.tag,e.quasi.expressions,r)},YieldExpression:function(e,r){var t=h(r).fnType;return t?t.yieldval:Z}},Ve=e.searchVisitor=p.make({Function:function(e,r,t){p.base.Function(e,e.scope,t)},CatchClause:function(e,r,t){p.base.CatchClause(e,e.scope,t)},Property:function(e,r,t){e.computed&&t(e.key,r,"Expression"),e.key!=e.value&&t(e.value,r,"Expression")},Statement:function(e,r,t){t(e,e.scope||r)},ImportSpecifier:function(e,r,t){t(e.local,r)},ImportDefaultSpecifier:function(e,r,t){t(e.local,r)},ImportNamespaceSpecifier:function(e,r,t){t(e.local,r)}});e.fullVisitor=p.make({MemberExpression:function(e,r,t){t(e.object,r,"Expression"),t(e.property,r,e.computed?"Expression":null)},Property:function(e,r,t){e.computed&&t(e.key,r,"Expression"),t(e.value,r,"Expression")}},Ve),e.findExpressionAt=function(e,r,t,o,n){return p.findNodeAt(e,r,t,n||function(e,r){return"Identifier"==r.type&&"\u2716"==r.name?!1:_e.hasOwnProperty(r.type)},Ve,o||Ce.topScope)},e.findExpressionAround=function(e,r,t,o,n){return p.findNodeAround(e,t,n||function(e,t){return null!=r&&t.start>r?!1:"Identifier"==t.type&&"\u2716"==t.name?!1:_e.hasOwnProperty(t.type)},Ve,o||Ce.topScope)},e.expressionType=function(e){return X(e.node,e.state)},e.parentNode=function(e,r){function t(r,n,a){if(r.start<=e.start&&r.end>=e.end){var i=o[o.length-1];if(r==e)throw{found:i};i!=r&&o.push(r),p.base[a||r.type](r,n,t),i!=r&&o.pop()}}var o=[];try{t(r,null)}catch(r){if(r.found)return r.found;throw r}};var Ge=e.findTypeFromContext={ArrayExpression:function(e,r,t){return t(e,!0).getProp("<i>")},ObjectExpression:function(e,r,t){for(var p,o=0;o<e.properties.length;++o)if(p=r.properties[o],p.value==r)return t(e,!0).getProp(He(p))},UnaryExpression:function(e){return F(e.operator)},UpdateExpression:function(){return Ce.num},BinaryExpression:function(e){return A(e.operator)?Ce.bool:Ce.num},AssignmentExpression:function(e,r,t){return t(e.left)},LogicalExpression:function(e,r,t){return t(e,!0)},ConditionalExpression:function(e,r,t){if(e.consequent==r||e.alternate==r)return t(e,!0)},CallExpression:function(e,r,t){for(var p,o=0;o<e.arguments.length;o++)if(p=e.arguments[o],p==r){var n=t(e.callee).getFunctionType();if(n instanceof Se)return n.args[o];break}},ReturnStatement:function(e,r,t){var o=p.findNodeAround(r.sourceFile.ast,r.start-1,"Function");if(o){var n="FunctionDeclaration"==o.node.type?o.node.scope.fnType:t(o.node,!0).getFunctionType();if(n)return n.retval.getType()}},VariableDeclarator:function(e,r,t){if(e.init==r)return t(e.id)}};Ge.NewExpression=Ge.CallExpression,e.typeFromContext=function(r,t){var p=e.parentNode(t.node,r),o=null;if(Ge.hasOwnProperty(p.type)){var n=Ge[p.type];o=n&&n(p,t.node,function(p,o){var n={node:p,state:t.state},a=o?e.typeFromContext(r,n):e.expressionType(n);return a||Z})}return o||e.expressionType(t)};var Be=!1;e.resetGuessing=function(e){Be=e},e.didGuess=function(){return Be},e.forAllPropertiesOf=function(e,r){e.gatherProperties(r,0)},e.findRefs=function(r,t,o,n,a){function i(e,t,p){if(e.name==o&&(e!=r.id||"FunctionDeclaration"!=r.type))for(var i=t;i;i=i.prev)if(i==n&&a(e,t,p),o in i.props)return}p.ancestor(r,{Identifier:i,VariablePattern:i},e.fullVisitor,t)};var Ue=p.make({Function:function(e,r,t){t(e.body,e.scope,e.expression?"Expression":"Statement")},Statement:function(e,r,t){t(e,e.scope||r)}});e.findPropRefs=function(e,r,t,o,n){function a(e){for(;e&&e!=t;){if(e.props[o]||e.maybeProps&&e.maybeProps[o])return!1;e=e.proto}return e}for(;t&&!t.props[o]&&!(t.maybeProps&&t.maybeProps[o]);)t=t.proto;if(!t)throw new Error("Couldn't locate property in the base object type.");p.simple(e,{MemberExpression:function(e,r){e.computed||He(e)!=o||a(X(e.object,r).getType())&&n(e.property,r)},ObjectExpression:function(e,r){if(X(e,r).getType()==t)for(var p=0;p<e.properties.length;++p)He(e.properties[p])==o&&n(e.properties[p].key,r)},MethodDefinition:function(e){He(e)!=o||e.value&&a(M(e.value.scope).getType())&&n(e.key,e.value.scope)}},Ue,r)};var qe=e.scopeAt=function(e,r,t){var o=p.findNodeAround(e,r,function(e,r){return r.scope});return o?o.node.scope:t||Ce.topScope};e.forAllLocalsAt=function(e,r,t,p){var o=qe(e,r,t);o.gatherProperties(p,0)},o=e.def=o.init({},e)});